---
description:
globs:
alwaysApply: false
---
# 开发工作流和最佳实践

## 开发环境
- Python 3.x (推荐3.8+)
- 依赖：BeautifulSoup4
- 操作系统：MacOS (当前开发环境)

## 代码修改原则

### 核心脚本修改 ([extract_titles.py](mdc:extract_titles.py))
1. **层级处理逻辑**：修改层级映射时要特别注意level>=4的知识点处理
2. **过滤规则**：添加新的内容过滤规则时，在HTML解析阶段进行
3. **JSON结构**：保持现有的章节-小节-子小节-知识点的层级结构
4. **编码处理**：始终使用UTF-8编码处理中文内容

### 辅助工具修改 ([tidy_markdown.py](mdc:tidy_markdown.py))
- 专门用于Markdown格式整理
- 跳过包含"知识点"的文件
- 保持缩进逻辑的一致性

## 测试和验证
1. **输入验证**：确保HTML文件包含正确的`tree-anchor`类元素
2. **输出验证**：检查生成的JSON文件结构完整性
3. **编码验证**：确保中文字符正确显示
4. **批量处理验证**：测试目录遍历和文件处理

## 文件组织规范
- 输入文件按学科分类存放在`html_files/`子目录
- 输出文件保持与输入文件相同的命名规范
- 备份重要的处理结果

## 常见问题处理
- HTML结构变化：检查`tree-anchor`类和`data-level`属性
- 中文编码问题：确保所有文件操作使用UTF-8
- 层级错乱：验证level值的正确性和连续性
